var CameraFollow=pc.createScript("cameraFollow");CameraFollow.attributes.add("GameManagerEntity",{type:"entity",title:"GameManager Entity"}),CameraFollow.attributes.add("HumanCameraPosition",{type:"vec3"}),CameraFollow.attributes.add("HorseCameraPosition",{type:"vec3"}),CameraFollow.attributes.add("BoatCameraPosition",{type:"vec3"}),CameraFollow.attributes.add("TrainCameraPosition",{type:"vec3"}),CameraFollow.attributes.add("CarCameraPosition",{type:"vec3"}),CameraFollow.attributes.add("PlanetCameraPosition",{type:"vec3"}),CameraFollow.attributes.add("SpaceShipCameraPosition",{type:"vec3"}),CameraFollow.prototype.initialize=function(){this.pivotPoint=new pc.Vec3,this.inertia=.15},CameraFollow.prototype.SetCameraPosition=function(t){0===t?this.entity.setLocalPosition(this.HumanCameraPosition):1===t?this.entity.setLocalPosition(this.HorseCameraPosition):2===t?this.entity.setLocalPosition(this.BoatCameraPosition):3===t?this.entity.setLocalPosition(this.TrainCameraPosition):4===t?this.entity.setLocalPosition(this.CarCameraPosition):5===t?this.entity.setLocalPosition(this.PlanetCameraPosition):6===t&&this.entity.setLocalPosition(this.SpaceShipCameraPosition)},CameraFollow.prototype.update=function(t){var i=Math.min(t/this.inertia,1),a=this.GameManagerEntity.script.gameManager.CameraFollowEntity.getPosition();a=new pc.Vec3(this.entity.getPosition().x,this.entity.getPosition().y,a.z),this.pivotPoint.lerp(this.entity.getPosition(),a,i),this.entity.setPosition(this.pivotPoint)};var HumanPlayerController=pc.createScript("humanPlayerController");HumanPlayerController.attributes.add("GameManagerEntity",{type:"entity"}),HumanPlayerController.attributes.add("SwipeDistance",{type:"number",default:1}),HumanPlayerController.attributes.add("ForwordSpeed",{type:"number",default:1}),HumanPlayerController.attributes.add("SwipeSpeedFacter",{type:"number",default:.15}),HumanPlayerController.attributes.add("LaneIndex",{type:"number",default:0}),HumanPlayerController.attributes.add("HightIndex",{type:"number",default:2}),HumanPlayerController.attributes.add("MainColider",{type:"entity"}),HumanPlayerController.prototype.initialize=function(){this.pivotPoint=new pc.Vec3,this.left=0,this.app.touch&&(this.app.touch.on(pc.EVENT_TOUCHSTART,this.onTouchDown,this),this.app.touch.on(pc.EVENT_TOUCHEND,this.onTouchUp,this)),this.app.mouse&&(this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),this.app.mouse.on(pc.EVENT_MOUSEUP,this.onMouseUp,this))},HumanPlayerController.prototype.onTouchDown=function(t){this.setInitialPos(t.changedTouches[0].x,t.changedTouches[0].y),t.event.preventDefault()},HumanPlayerController.prototype.onTouchUp=function(t){this.updateSwipeDirection(t.changedTouches[0].x,t.changedTouches[0].y),t.event.preventDefault()},HumanPlayerController.prototype.onMouseDown=function(t){t.button===pc.MOUSEBUTTON_LEFT&&this.setInitialPos(t.x,t.y)},HumanPlayerController.prototype.onMouseUp=function(t){t.button===pc.MOUSEBUTTON_LEFT&&this.updateSwipeDirection(t.x,t.y)},HumanPlayerController.prototype.setInitialPos=function(t,e){this._initialTouchPos={x:t,y:e}},HumanPlayerController.prototype.updateSwipeDirection=function(t,e){var i={x:t,y:e},n=vectorAngleDegree(this._initialTouchPos,i);debugLog("Degree: "+n),n<-135||n>135?(debugLog("Swiped Left"),setTimeout((()=>{this.SwipLeft()}),200),this.entity.sound.play("Swipe"),this.entity.anim.setTrigger("Left")):n>-135&&n<-45?(debugLog("Swiped Up"),this.SwipUp(),this.entity.sound.play("Swipe")):n>-45&&n<45?(debugLog("Swiped Right"),setTimeout((()=>{this.SwipRight()}),200),this.entity.sound.play("Swipe"),this.entity.anim.setTrigger("Right")):n>45&&n<135&&(debugLog("Swiped Down"),this.SwipDown())},HumanPlayerController.prototype.SwipUp=function(){this.MainColider.enabled=!1,setTimeout((()=>{this.MainColider.enabled=!0}),1500),this.entity.anim.setTrigger("Jump")},HumanPlayerController.prototype.SwipDown=function(){2!==this.IsSwipedDown&&3!==this.HightIndex||(3==this.HightIndex?this.HightIndex=2:this.HightIndex=-3)},HumanPlayerController.prototype.SwipLeft=function(){if(0===this.LaneIndex||1===this.LaneIndex){var t=this.entity.getPosition();1==this.LaneIndex?(this.LaneIndex=0,t.x=0,this.left=t.x):(this.LaneIndex=-1,t.x=this.SwipeDistance,this.left=t.x)}},HumanPlayerController.prototype.SwipRight=function(){if(0===this.LaneIndex||-1===this.LaneIndex){var t=this.entity.getPosition();-1==this.LaneIndex?(this.LaneIndex=0,t.x=0,this.left=t.x):(this.LaneIndex=1,t.x=-this.SwipeDistance,this.left=t.x)}},HumanPlayerController.prototype.update=function(t){this.app.keyboard.wasPressed(pc.KEY_LEFT)?(setTimeout((()=>{this.SwipLeft()}),200),this.entity.anim.setTrigger("Left"),this.entity.sound.play("Swipe")):this.app.keyboard.wasPressed(pc.KEY_RIGHT)?(setTimeout((()=>{this.SwipRight()}),200),this.entity.anim.setTrigger("Right"),this.entity.sound.play("Swipe")):this.app.keyboard.wasPressed(pc.KEY_UP)&&(this.MainColider.enabled=!1,setTimeout((()=>{this.MainColider.enabled=!0}),1500),this.entity.anim.setTrigger("Jump"),this.entity.sound.play("Swipe"));var e=Math.min(t/this.SwipeSpeedFacter,1),i=this.entity.getPosition(),n=new pc.Vec3(this.left,i.y,i.z);this.pivotPoint.lerp(i,n,e),this.entity.setPosition(this.pivotPoint),this.entity.translate(0,0,this.ForwordSpeed*t*10)};var vectorMagnitude=function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)},vectorAngleDegree=function(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI},debugLog=function(t){SwipeInput.VERBOSE&&console.log(t)};var SwipeInput=pc.createScript("swipeInput");var GameManager=pc.createScript("gameManager");GameManager.attributes.add("UiManagerEntity",{type:"entity"}),GameManager.attributes.add("CameraFollowEntity",{type:"entity"}),GameManager.attributes.add("CameraFollowScriptEntity",{type:"entity"}),GameManager.attributes.add("StarCount",{type:"number",default:0}),GameManager.attributes.add("HumanCameraEntity",{type:"entity"}),GameManager.attributes.add("HorseCameraEntity",{type:"entity"}),GameManager.attributes.add("BoatCameraEntity",{type:"entity"}),GameManager.attributes.add("TrainCameraEntity",{type:"entity"}),GameManager.attributes.add("CarCameraEntity",{type:"entity"}),GameManager.attributes.add("PlanetCameraEntity",{type:"entity"}),GameManager.attributes.add("SpaceShipCameraEntity",{type:"entity"}),GameManager.attributes.add("HumanEntity",{type:"entity"}),GameManager.attributes.add("HorseEntity",{type:"entity"}),GameManager.attributes.add("BoatEntity",{type:"entity"}),GameManager.attributes.add("TrainEntity",{type:"entity"}),GameManager.attributes.add("CarEntity",{type:"entity"}),GameManager.attributes.add("PlanetEntity",{type:"entity"}),GameManager.attributes.add("SpaceShipEntity",{type:"entity"}),GameManager.attributes.add("HumanEnvironment",{type:"entity"}),GameManager.attributes.add("AnimalsEnvironment",{type:"entity"}),GameManager.attributes.add("BoatEnvironment",{type:"entity"}),GameManager.attributes.add("TrainEnvironment",{type:"entity"}),GameManager.attributes.add("CarEnvironment",{type:"entity"}),GameManager.attributes.add("PlanetEnvironment",{type:"entity"}),GameManager.attributes.add("SpaceShipEnvironment",{type:"entity"}),GameManager.attributes.add("PlanetCubeMap",{type:"asset",assetType:"cubemap"}),GameManager.attributes.add("SpaceShipCubeMap",{type:"asset",assetType:"cubemap"}),GameManager.attributes.add("PlanetWorldMapEntity",{type:"entity"}),GameManager.attributes.add("SpaceShipWorldMapEntity",{type:"entity"}),GameManager.attributes.add("LevelTransitionDelay",{type:"number",default:2e3}),GameManager.prototype.initialize=function(){},GameManager.prototype.AddStarCount=function(t){this.StarCount+=t,this.UiManagerEntity.script.uiManager.UpdateStarCount(this.StarCount)},GameManager.prototype.ReduceStarCount=function(t){this.StarCount-=t,this.StarCount<0&&(this.StarCount=0),this.UiManagerEntity.script.uiManager.UpdateStarCount(this.StarCount)},GameManager.prototype.updateHorseEnvironment=function(){this.CameraFollowScriptEntity.script.cameraFollow.SetCameraPosition(1),this.CameraFollowEntity=this.HorseCameraEntity,setTimeout((()=>{this.HumanEnvironment.enabled=!1,this.AnimalsEnvironment.enabled=!0}),this.LevelTransitionDelay)},GameManager.prototype.updateBoatEnvironment=function(){this.CameraFollowScriptEntity.script.cameraFollow.SetCameraPosition(2),this.CameraFollowEntity=this.BoatCameraEntity,setTimeout((()=>{this.AnimalsEnvironment.enabled=!1,this.BoatEnvironment.enabled=!0}),this.LevelTransitionDelay)},GameManager.prototype.updateTrainEnvironment=function(){this.CameraFollowScriptEntity.script.cameraFollow.SetCameraPosition(3),this.CameraFollowEntity=this.TrainCameraEntity,setTimeout((()=>{this.BoatEnvironment.enabled=!1,this.TrainEnvironment.enabled=!0}),this.LevelTransitionDelay)},GameManager.prototype.updateCarEnvironment=function(){this.CameraFollowScriptEntity.script.cameraFollow.SetCameraPosition(4),this.CameraFollowEntity=this.CarCameraEntity,setTimeout((()=>{this.TrainEnvironment.enabled=!1,this.CarEnvironment.enabled=!0}),this.LevelTransitionDelay)},GameManager.prototype.updatePlanetEnvironment=function(){this.CameraFollowScriptEntity.script.cameraFollow.SetCameraPosition(5),this.CameraFollowEntity=this.PlanetCameraEntity,0===this.app.scene.skyboxMip&&(this.PlanetCubeMap.loadFaces=!0,this.app.assets.load(this.PlanetCubeMap)),this.app.scene.setSkybox(this.PlanetCubeMap.resources),setTimeout((()=>{this.CarEnvironment.enabled=!1,this.PlanetWorldMapEntity.enabled=!0,this.PlanetEnvironment.enabled=!0}),this.LevelTransitionDelay)},GameManager.prototype.updateSpaceShipEnvironment=function(){this.CameraFollowScriptEntity.script.cameraFollow.SetCameraPosition(6),this.CameraFollowEntity=this.SpaceShipCameraEntity,0===this.app.scene.skyboxMip&&(this.SpaceShipCubeMap.loadFaces=!0,this.app.assets.load(this.SpaceShipCubeMap)),this.app.scene.setSkybox(this.SpaceShipCubeMap.resources),setTimeout((()=>{this.PlanetWorldMapEntity.enabled=!1,this.PlanetEnvironment.enabled=!1,this.SpaceShipWorldMapEntity.enabled=!0,this.SpaceShipEnvironment.enabled=!0}),this.LevelTransitionDelay)},GameManager.prototype.GameEnd=function(){this.UiManagerEntity.script.uiManager.ShowGameEnd(this.StarCount)},GameManager.prototype.Reset=function(){this.StarCount=0,this.CameraFollowEntity=this.HumanCameraEntity,this.HumanEnvironment.enabled=!0,this.AnimalsEnvironment.enabled=!1,this.BoatEnvironment.enabled=!1,this.TrainCameraEntity.enabled=!1,this.CarEnvironment.enabled=!1,this.PlanetEnvironment.enabled=!1,this.SpaceShipEnvironment.enabled=!1,this.PlanetWorldMapEntity.enabled=!1,this.SpaceShipWorldMapEntity.enabled=!1,this.HumanEntity.setLocalPosition(new pc.Vec3(0,0,0)),this.HorseEntity.setLocalPosition(new pc.Vec3(0,0,0)),this.BoatEntity.setLocalPosition(new pc.Vec3(0,0,0)),this.TrainEntity.setLocalPosition(new pc.Vec3(0,0,0)),this.CarEntity.setLocalPosition(new pc.Vec3(0,0,0)),this.PlanetEntity.setLocalPosition(new pc.Vec3(0,0,0)),this.SpaceShipEntity.setLocalPosition(new pc.Vec3(0,0,0))};var SkyboxUpdater=pc.createScript("skyboxUpdater");function onClick(){0===this.app.scene.skyboxMip&&(this.cubemap.loadFaces=!0,this.app.assets.load(this.cubemap)),this.app.scene.setSkybox(this.cubemap.resources)}SkyboxUpdater.attributes.add("cubemap",{type:"asset",assetType:"cubemap"}),SkyboxUpdater.prototype.initialize=function(){var e=document.createElement("div"),t=document.createElement("button");t.style="position:fixed; top:0px; left:0px; width:100px; height:30px",t.innerHTML="Test",t.addEventListener("click",onClick.bind(this)),e.appendChild(t),document.body.appendChild(e)},SkyboxUpdater.prototype.update=function(e){};var HorsePlayerController=pc.createScript("horsePlayerController");HorsePlayerController.attributes.add("GameManagerEntity",{type:"entity"}),HorsePlayerController.attributes.add("HorseManEntity",{type:"entity"}),HorsePlayerController.attributes.add("SwipeDistance",{type:"number",default:1}),HorsePlayerController.attributes.add("ForwordSpeed",{type:"number",default:1}),HorsePlayerController.attributes.add("SwipeSpeedFacter",{type:"number",default:.15}),HorsePlayerController.attributes.add("LaneIndex",{type:"number",default:0}),HorsePlayerController.attributes.add("HightIndex",{type:"number",default:0}),HorsePlayerController.attributes.add("MainColider",{type:"entity"}),HorsePlayerController.prototype.initialize=function(){this.pivotPoint=new pc.Vec3,this.left=0,this.app.touch&&(this.app.touch.on(pc.EVENT_TOUCHSTART,this.onTouchDown,this),this.app.touch.on(pc.EVENT_TOUCHEND,this.onTouchUp,this)),this.app.mouse&&(this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),this.app.mouse.on(pc.EVENT_MOUSEUP,this.onMouseUp,this))},HorsePlayerController.prototype.onTouchDown=function(t){this.setInitialPos(t.changedTouches[0].x,t.changedTouches[0].y),t.event.preventDefault()},HorsePlayerController.prototype.onTouchUp=function(t){this.updateSwipeDirection(t.changedTouches[0].x,t.changedTouches[0].y),t.event.preventDefault()},HorsePlayerController.prototype.onMouseDown=function(t){t.button===pc.MOUSEBUTTON_LEFT&&this.setInitialPos(t.x,t.y)},HorsePlayerController.prototype.onMouseUp=function(t){t.button===pc.MOUSEBUTTON_LEFT&&this.updateSwipeDirection(t.x,t.y)},HorsePlayerController.prototype.setInitialPos=function(t,e){this._initialTouchPos={x:t,y:e}},HorsePlayerController.prototype.updateSwipeDirection=function(t,e){var i={x:t,y:e},o=vectorAngleDegree(this._initialTouchPos,i);debugLog("Degree: "+o),o<-135||o>135?(debugLog("Swiped Left"),setTimeout((()=>{this.SwipLeft()}),0),this.entity.anim.setTrigger("Left"),this.HorseManEntity.anim.setTrigger("Left"),this.entity.sound.play("Swipe")):o>-135&&o<-45?(debugLog("Swiped Up"),this.SwipUp(),this.entity.sound.play("Swipe")):o>-45&&o<45?(debugLog("Swiped Right"),setTimeout((()=>{this.SwipRight()}),0),this.entity.anim.setTrigger("Right"),this.HorseManEntity.anim.setTrigger("Right"),this.entity.sound.play("Swipe")):o>45&&o<135&&(debugLog("Swiped Down"),this.SwipDown())},HorsePlayerController.prototype.SwipUp=function(){this.MainColider.enabled=!1,setTimeout((()=>{this.MainColider.enabled=!0}),1500),this.entity.anim.setTrigger("Jump"),this.HorseManEntity.anim.setTrigger("Jump")},HorsePlayerController.prototype.SwipDown=function(){2!==this.IsSwipedDown&&3!==this.HightIndex||(3==this.HightIndex?this.HightIndex=2:this.HightIndex=-3)},HorsePlayerController.prototype.SwipLeft=function(){if(0===this.LaneIndex||1===this.LaneIndex){var t=this.entity.getPosition();1==this.LaneIndex?(this.LaneIndex=0,t.x=0,this.left=t.x):(this.LaneIndex=-1,t.x=this.SwipeDistance,this.left=t.x)}},HorsePlayerController.prototype.SwipRight=function(){if(0===this.LaneIndex||-1===this.LaneIndex){var t=this.entity.getPosition();-1==this.LaneIndex?(this.LaneIndex=0,t.x=0,this.left=t.x):(this.LaneIndex=1,t.x=-this.SwipeDistance,this.left=t.x)}},HorsePlayerController.prototype.update=function(t){this.app.keyboard.wasPressed(pc.KEY_LEFT)?(setTimeout((()=>{this.SwipLeft()}),0),this.entity.anim.setTrigger("Left"),this.HorseManEntity.anim.setTrigger("Left"),this.entity.sound.play("Swipe")):this.app.keyboard.wasPressed(pc.KEY_RIGHT)?(setTimeout((()=>{this.SwipRight()}),0),this.entity.anim.setTrigger("Right"),this.HorseManEntity.anim.setTrigger("Right"),this.entity.sound.play("Swipe")):this.app.keyboard.wasPressed(pc.KEY_UP)&&(this.MainColider.enabled=!1,setTimeout((()=>{this.MainColider.enabled=!0}),1500),this.entity.anim.setTrigger("Jump"),this.HorseManEntity.anim.setTrigger("Jump"),this.entity.sound.play("Swipe"));var e=Math.min(t/this.SwipeSpeedFacter,1),i=this.entity.getPosition(),o=new pc.Vec3(this.left,i.y,i.z);this.pivotPoint.lerp(i,o,e),this.entity.setPosition(this.pivotPoint),this.entity.translate(0,0,this.ForwordSpeed*t*10)};var vectorMagnitude=function(t,e){var i=t.x-e.x,o=t.y-e.y;return Math.sqrt(i*i+o*o)},vectorAngleDegree=function(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI},debugLog=function(t){SwipeInput.VERBOSE&&console.log(t)};var TransMissionModeHandler=pc.createScript("transMissionModeHandler");TransMissionModeHandler.prototype.initialize=function(){this.entity.collision.on("triggerenter",this.onTriggerEnter,this)},TransMissionModeHandler.prototype.onTriggerEnter=function(a){a.tags.has("Human")?(globalVariables.UIManagerEntity.script.uiManager.ShowSceneTransition(),globalVariables.GameManagerEntity.script.gameManager.updateHorseEnvironment()):a.tags.has("Horse")?(globalVariables.UIManagerEntity.script.uiManager.ShowSceneTransition(),globalVariables.GameManagerEntity.script.gameManager.updateBoatEnvironment()):a.tags.has("Boat")?(globalVariables.UIManagerEntity.script.uiManager.ShowSceneTransition(),globalVariables.GameManagerEntity.script.gameManager.updateTrainEnvironment()):a.tags.has("Train")?(globalVariables.UIManagerEntity.script.uiManager.ShowSceneTransition(),globalVariables.GameManagerEntity.script.gameManager.updateCarEnvironment()):a.tags.has("Car")?(globalVariables.UIManagerEntity.script.uiManager.ShowSceneTransition(),globalVariables.GameManagerEntity.script.gameManager.updatePlanetEnvironment()):a.tags.has("Planet")?(globalVariables.UIManagerEntity.script.uiManager.ShowSceneTransition(),globalVariables.GameManagerEntity.script.gameManager.updateSpaceShipEnvironment()):a.tags.has("SpaceShip")&&globalVariables.GameManagerEntity.script.gameManager.GameEnd()};var BoatPlayerController=pc.createScript("boatPlayerController");BoatPlayerController.attributes.add("GameManagerEntity",{type:"entity"}),BoatPlayerController.attributes.add("ChinseGirlEntity",{type:"entity"}),BoatPlayerController.attributes.add("SwipeDistance",{type:"number",default:1}),BoatPlayerController.attributes.add("ForwordSpeed",{type:"number",default:1}),BoatPlayerController.attributes.add("SwipeSpeedFacter",{type:"number",default:.15}),BoatPlayerController.attributes.add("LaneIndex",{type:"number",default:0}),BoatPlayerController.attributes.add("HightIndex",{type:"number",default:0}),BoatPlayerController.prototype.initialize=function(){this.pivotPoint=new pc.Vec3,this.left=0,this.app.touch&&(this.app.touch.on(pc.EVENT_TOUCHSTART,this.onTouchDown,this),this.app.touch.on(pc.EVENT_TOUCHEND,this.onTouchUp,this)),this.app.mouse&&(this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),this.app.mouse.on(pc.EVENT_MOUSEUP,this.onMouseUp,this))},BoatPlayerController.prototype.onTouchDown=function(t){this.setInitialPos(t.changedTouches[0].x,t.changedTouches[0].y),t.event.preventDefault()},BoatPlayerController.prototype.onTouchUp=function(t){this.updateSwipeDirection(t.changedTouches[0].x,t.changedTouches[0].y),t.event.preventDefault()},BoatPlayerController.prototype.onMouseDown=function(t){t.button===pc.MOUSEBUTTON_LEFT&&this.setInitialPos(t.x,t.y)},BoatPlayerController.prototype.onMouseUp=function(t){t.button===pc.MOUSEBUTTON_LEFT&&this.updateSwipeDirection(t.x,t.y)},BoatPlayerController.prototype.setInitialPos=function(t,e){this._initialTouchPos={x:t,y:e}},BoatPlayerController.prototype.updateSwipeDirection=function(t,e){var i={x:t,y:e},o=vectorAngleDegree(this._initialTouchPos,i);debugLog("Degree: "+o),o<-135||o>135?(debugLog("Swiped Left"),setTimeout((()=>{this.SwipLeft()}),100),this.entity.anim.setTrigger("Left"),this.ChinseGirlEntity.anim.setTrigger("Left"),this.entity.sound.play("Swipe")):o>-135&&o<-45?(debugLog("Swiped Up"),this.SwipUp()):o>-45&&o<45?(debugLog("Swiped Right"),setTimeout((()=>{this.SwipRight()}),100),this.entity.anim.setTrigger("Right"),this.ChinseGirlEntity.anim.setTrigger("Right"),this.entity.sound.play("Swipe")):o>45&&o<135&&(debugLog("Swiped Down"),this.SwipDown())},BoatPlayerController.prototype.SwipUp=function(){this.entity.anim.setTrigger("Jump")},BoatPlayerController.prototype.SwipDown=function(){2!==this.IsSwipedDown&&3!==this.HightIndex||(3==this.HightIndex?this.HightIndex=2:this.HightIndex=-3)},BoatPlayerController.prototype.SwipLeft=function(){if(0===this.LaneIndex||1===this.LaneIndex){var t=this.entity.getPosition();1==this.LaneIndex?(this.LaneIndex=0,t.x=0,this.left=t.x):(this.LaneIndex=-1,t.x=this.SwipeDistance,this.left=t.x)}},BoatPlayerController.prototype.SwipRight=function(){if(0===this.LaneIndex||-1===this.LaneIndex){var t=this.entity.getPosition();-1==this.LaneIndex?(this.LaneIndex=0,t.x=0,this.left=t.x):(this.LaneIndex=1,t.x=-this.SwipeDistance,this.left=t.x)}},BoatPlayerController.prototype.update=function(t){this.app.keyboard.wasPressed(pc.KEY_LEFT)?(setTimeout((()=>{this.SwipLeft()}),100),this.entity.anim.setTrigger("Left"),this.ChinseGirlEntity.anim.setTrigger("Left"),this.entity.sound.play("Swipe")):this.app.keyboard.wasPressed(pc.KEY_RIGHT)&&(setTimeout((()=>{this.SwipRight()}),100),this.entity.anim.setTrigger("Right"),this.ChinseGirlEntity.anim.setTrigger("Right"),this.entity.sound.play("Swipe"));var e=Math.min(t/this.SwipeSpeedFacter,1),i=this.entity.getPosition(),o=new pc.Vec3(this.left,i.y,i.z);this.pivotPoint.lerp(i,o,e),this.entity.setPosition(this.pivotPoint),this.entity.translate(0,0,this.ForwordSpeed*t*10)};var vectorMagnitude=function(t,e){var i=t.x-e.x,o=t.y-e.y;return Math.sqrt(i*i+o*o)},vectorAngleDegree=function(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI},debugLog=function(t){SwipeInput.VERBOSE&&console.log(t)};var TrainPlayerController=pc.createScript("trainPlayerController");TrainPlayerController.attributes.add("GameManagerEntity",{type:"entity"}),TrainPlayerController.attributes.add("SwipeDistance",{type:"number",default:1}),TrainPlayerController.attributes.add("ForwordSpeed",{type:"number",default:1}),TrainPlayerController.attributes.add("SwipeSpeedFacter",{type:"number",default:.15}),TrainPlayerController.attributes.add("LaneIndex",{type:"number",default:0}),TrainPlayerController.attributes.add("HightIndex",{type:"number",default:0}),TrainPlayerController.prototype.initialize=function(){this.pivotPoint=new pc.Vec3,this.left=0,this.app.touch&&(this.app.touch.on(pc.EVENT_TOUCHSTART,this.onTouchDown,this),this.app.touch.on(pc.EVENT_TOUCHEND,this.onTouchUp,this)),this.app.mouse&&(this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),this.app.mouse.on(pc.EVENT_MOUSEUP,this.onMouseUp,this))},TrainPlayerController.prototype.onTouchDown=function(t){this.setInitialPos(t.changedTouches[0].x,t.changedTouches[0].y),t.event.preventDefault()},TrainPlayerController.prototype.onTouchUp=function(t){this.updateSwipeDirection(t.changedTouches[0].x,t.changedTouches[0].y),t.event.preventDefault()},TrainPlayerController.prototype.onMouseDown=function(t){t.button===pc.MOUSEBUTTON_LEFT&&this.setInitialPos(t.x,t.y)},TrainPlayerController.prototype.onMouseUp=function(t){t.button===pc.MOUSEBUTTON_LEFT&&this.updateSwipeDirection(t.x,t.y)},TrainPlayerController.prototype.setInitialPos=function(t,e){this._initialTouchPos={x:t,y:e}},TrainPlayerController.prototype.updateSwipeDirection=function(t,e){var i={x:t,y:e},n=vectorAngleDegree(this._initialTouchPos,i);debugLog("Degree: "+n),n<-135||n>135?(debugLog("Swiped Left"),setTimeout((()=>{this.SwipLeft()}),200),this.entity.anim.setTrigger("Left"),this.entity.sound.play("Swipe")):n>-135&&n<-45?(debugLog("Swiped Up"),this.SwipUp()):n>-45&&n<45?(debugLog("Swiped Right"),setTimeout((()=>{this.SwipRight()}),200),this.entity.anim.setTrigger("Right"),this.entity.sound.play("Swipe")):n>45&&n<135&&(debugLog("Swiped Down"),this.SwipDown())},TrainPlayerController.prototype.SwipUp=function(){this.entity.anim.setTrigger("Jump")},TrainPlayerController.prototype.SwipDown=function(){2!==this.IsSwipedDown&&3!==this.HightIndex||(3==this.HightIndex?this.HightIndex=2:this.HightIndex=-3)},TrainPlayerController.prototype.SwipLeft=function(){if(0===this.LaneIndex||1===this.LaneIndex){var t=this.entity.getPosition();1==this.LaneIndex?(this.LaneIndex=0,t.x=0,this.left=t.x):(this.LaneIndex=-1,t.x=this.SwipeDistance,this.left=t.x)}},TrainPlayerController.prototype.SwipRight=function(){if(0===this.LaneIndex||-1===this.LaneIndex){var t=this.entity.getPosition();-1==this.LaneIndex?(this.LaneIndex=0,t.x=0,this.left=t.x):(this.LaneIndex=1,t.x=-this.SwipeDistance,this.left=t.x)}},TrainPlayerController.prototype.update=function(t){this.app.keyboard.wasPressed(pc.KEY_LEFT)?(setTimeout((()=>{this.SwipLeft()}),200),this.entity.anim.setTrigger("Left"),this.entity.sound.play("Swipe")):this.app.keyboard.wasPressed(pc.KEY_RIGHT)&&(setTimeout((()=>{this.SwipRight()}),200),this.entity.anim.setTrigger("Right"),this.entity.sound.play("Swipe"));var e=Math.min(t/this.SwipeSpeedFacter,1),i=this.entity.getPosition(),n=new pc.Vec3(this.left,i.y,i.z);this.pivotPoint.lerp(i,n,e),this.entity.setPosition(this.pivotPoint),this.entity.translate(0,0,this.ForwordSpeed*t*10)};var vectorMagnitude=function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)},vectorAngleDegree=function(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI},debugLog=function(t){SwipeInput.VERBOSE&&console.log(t)};var CarPlayerController=pc.createScript("carPlayerController");CarPlayerController.attributes.add("GameManagerEntity",{type:"entity"}),CarPlayerController.attributes.add("SwipeDistance",{type:"number",default:1}),CarPlayerController.attributes.add("ForwordSpeed",{type:"number",default:1}),CarPlayerController.attributes.add("SwipeSpeedFacter",{type:"number",default:.15}),CarPlayerController.attributes.add("LaneIndex",{type:"number",default:0}),CarPlayerController.attributes.add("HightIndex",{type:"number",default:0}),CarPlayerController.prototype.initialize=function(){this.pivotPoint=new pc.Vec3,this.left=0,this.app.touch&&(this.app.touch.on(pc.EVENT_TOUCHSTART,this.onTouchDown,this),this.app.touch.on(pc.EVENT_TOUCHEND,this.onTouchUp,this)),this.app.mouse&&(this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),this.app.mouse.on(pc.EVENT_MOUSEUP,this.onMouseUp,this))},CarPlayerController.prototype.onTouchDown=function(t){this.setInitialPos(t.changedTouches[0].x,t.changedTouches[0].y),t.event.preventDefault()},CarPlayerController.prototype.onTouchUp=function(t){this.updateSwipeDirection(t.changedTouches[0].x,t.changedTouches[0].y),t.event.preventDefault()},CarPlayerController.prototype.onMouseDown=function(t){t.button===pc.MOUSEBUTTON_LEFT&&this.setInitialPos(t.x,t.y)},CarPlayerController.prototype.onMouseUp=function(t){t.button===pc.MOUSEBUTTON_LEFT&&this.updateSwipeDirection(t.x,t.y)},CarPlayerController.prototype.setInitialPos=function(t,e){this._initialTouchPos={x:t,y:e}},CarPlayerController.prototype.updateSwipeDirection=function(t,e){var i={x:t,y:e},n=vectorAngleDegree(this._initialTouchPos,i);debugLog("Degree: "+n),n<-135||n>135?(debugLog("Swiped Left"),setTimeout((()=>{this.SwipLeft()}),0),this.entity.anim.setTrigger("Left"),this.entity.sound.play("Swipe")):n>-135&&n<-45?(debugLog("Swiped Up"),this.SwipUp()):n>-45&&n<45?(debugLog("Swiped Right"),setTimeout((()=>{this.SwipRight()}),0),this.entity.anim.setTrigger("Right"),this.entity.sound.play("Swipe")):n>45&&n<135&&(debugLog("Swiped Down"),this.SwipDown())},CarPlayerController.prototype.SwipUp=function(){this.entity.anim.setTrigger("Jump")},CarPlayerController.prototype.SwipDown=function(){2!==this.IsSwipedDown&&3!==this.HightIndex||(3==this.HightIndex?this.HightIndex=2:this.HightIndex=-3)},CarPlayerController.prototype.SwipLeft=function(){if(0===this.LaneIndex||1===this.LaneIndex){var t=this.entity.getPosition();1==this.LaneIndex?(this.LaneIndex=0,t.x=0,this.left=t.x):(this.LaneIndex=-1,t.x=this.SwipeDistance,this.left=t.x)}},CarPlayerController.prototype.SwipRight=function(){if(0===this.LaneIndex||-1===this.LaneIndex){var t=this.entity.getPosition();-1==this.LaneIndex?(this.LaneIndex=0,t.x=0,this.left=t.x):(this.LaneIndex=1,t.x=-this.SwipeDistance,this.left=t.x)}},CarPlayerController.prototype.update=function(t){this.app.keyboard.wasPressed(pc.KEY_LEFT)?(setTimeout((()=>{this.SwipLeft()}),0),this.entity.anim.setTrigger("Left"),this.entity.sound.play("Swipe")):this.app.keyboard.wasPressed(pc.KEY_RIGHT)&&(setTimeout((()=>{this.SwipRight()}),0),this.entity.anim.setTrigger("Right"),this.entity.sound.play("Swipe"));var e=Math.min(t/this.SwipeSpeedFacter,1),i=this.entity.getPosition(),n=new pc.Vec3(this.left,i.y,i.z);this.pivotPoint.lerp(i,n,e),this.entity.setPosition(this.pivotPoint),this.entity.translate(0,0,this.ForwordSpeed*t*10)};var vectorMagnitude=function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)},vectorAngleDegree=function(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI},debugLog=function(t){SwipeInput.VERBOSE&&console.log(t)};var PlanetPlayerController=pc.createScript("planetPlayerController");PlanetPlayerController.attributes.add("GameManagerEntity",{type:"entity"}),PlanetPlayerController.attributes.add("SwipeDistance",{type:"number",default:1}),PlanetPlayerController.attributes.add("ForwordSpeed",{type:"number",default:1}),PlanetPlayerController.attributes.add("SwipeSpeedFacter",{type:"number",default:.15}),PlanetPlayerController.attributes.add("LaneIndex",{type:"number",default:0}),PlanetPlayerController.attributes.add("HightIndex",{type:"number",default:0}),PlanetPlayerController.prototype.initialize=function(){this.pivotPoint=new pc.Vec3,this.left=0,this.app.touch&&(this.app.touch.on(pc.EVENT_TOUCHSTART,this.onTouchDown,this),this.app.touch.on(pc.EVENT_TOUCHEND,this.onTouchUp,this)),this.app.mouse&&(this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),this.app.mouse.on(pc.EVENT_MOUSEUP,this.onMouseUp,this))},PlanetPlayerController.prototype.onTouchDown=function(t){this.setInitialPos(t.changedTouches[0].x,t.changedTouches[0].y),t.event.preventDefault()},PlanetPlayerController.prototype.onTouchUp=function(t){this.updateSwipeDirection(t.changedTouches[0].x,t.changedTouches[0].y),t.event.preventDefault()},PlanetPlayerController.prototype.onMouseDown=function(t){t.button===pc.MOUSEBUTTON_LEFT&&this.setInitialPos(t.x,t.y)},PlanetPlayerController.prototype.onMouseUp=function(t){t.button===pc.MOUSEBUTTON_LEFT&&this.updateSwipeDirection(t.x,t.y)},PlanetPlayerController.prototype.setInitialPos=function(t,e){this._initialTouchPos={x:t,y:e}},PlanetPlayerController.prototype.updateSwipeDirection=function(t,e){var i={x:t,y:e},n=vectorAngleDegree(this._initialTouchPos,i);debugLog("Degree: "+n),n<-135||n>135?(debugLog("Swiped Left"),setTimeout((()=>{this.SwipLeft()}),0),this.entity.anim.setTrigger("Left"),this.entity.sound.play("Swipe")):n>-135&&n<-45?(debugLog("Swiped Up"),this.SwipUp()):n>-45&&n<45?(debugLog("Swiped Right"),setTimeout((()=>{this.SwipRight()}),0),this.entity.anim.setTrigger("Right"),this.entity.sound.play("Swipe")):n>45&&n<135&&(debugLog("Swiped Down"),this.SwipDown())},PlanetPlayerController.prototype.SwipUp=function(){this.entity.anim.setTrigger("Jump")},PlanetPlayerController.prototype.SwipDown=function(){2!==this.IsSwipedDown&&3!==this.HightIndex||(3==this.HightIndex?this.HightIndex=2:this.HightIndex=-3)},PlanetPlayerController.prototype.SwipLeft=function(){if(0===this.LaneIndex||1===this.LaneIndex){var t=this.entity.getPosition();1==this.LaneIndex?(this.LaneIndex=0,t.x=0,this.left=t.x):(this.LaneIndex=-1,t.x=this.SwipeDistance,this.left=t.x)}},PlanetPlayerController.prototype.SwipRight=function(){if(0===this.LaneIndex||-1===this.LaneIndex){var t=this.entity.getPosition();-1==this.LaneIndex?(this.LaneIndex=0,t.x=0,this.left=t.x):(this.LaneIndex=1,t.x=-this.SwipeDistance,this.left=t.x)}},PlanetPlayerController.prototype.update=function(t){this.app.keyboard.wasPressed(pc.KEY_LEFT)?(setTimeout((()=>{this.SwipLeft()}),0),this.entity.anim.setTrigger("Left"),this.entity.sound.play("Swipe")):this.app.keyboard.wasPressed(pc.KEY_RIGHT)&&(setTimeout((()=>{this.SwipRight()}),0),this.entity.anim.setTrigger("Right"),this.entity.sound.play("Swipe"));var e=Math.min(t/this.SwipeSpeedFacter,1),i=this.entity.getPosition(),n=new pc.Vec3(this.left,i.y,i.z);this.pivotPoint.lerp(i,n,e),this.entity.setPosition(this.pivotPoint),this.entity.translate(0,0,this.ForwordSpeed*t*10)};var vectorMagnitude=function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)},vectorAngleDegree=function(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI},debugLog=function(t){SwipeInput.VERBOSE&&console.log(t)};var SpaceShipPlayerController=pc.createScript("spaceShipPlayerController");SpaceShipPlayerController.attributes.add("GameManagerEntity",{type:"entity"}),SpaceShipPlayerController.attributes.add("SpaceShipParentEntity",{type:"entity"}),SpaceShipPlayerController.attributes.add("SpaceEntity",{type:"entity"}),SpaceShipPlayerController.attributes.add("CameraEntity",{type:"entity"}),SpaceShipPlayerController.attributes.add("CameraFollowEntity",{type:"entity"}),SpaceShipPlayerController.attributes.add("SwipeDistance",{type:"number",default:1}),SpaceShipPlayerController.attributes.add("ForwordSpeed",{type:"number",default:1}),SpaceShipPlayerController.attributes.add("SwipeSpeedFacter",{type:"number",default:.15}),SpaceShipPlayerController.attributes.add("LaneIndex",{type:"number",default:0}),SpaceShipPlayerController.attributes.add("HightIndex",{type:"number",default:0}),SpaceShipPlayerController.prototype.initialize=function(){this.pivotPoint=new pc.Vec3,this.left=0,this.app.touch&&(this.app.touch.on(pc.EVENT_TOUCHSTART,this.onTouchDown,this),this.app.touch.on(pc.EVENT_TOUCHEND,this.onTouchUp,this)),this.app.mouse&&(this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),this.app.mouse.on(pc.EVENT_MOUSEUP,this.onMouseUp,this))},SpaceShipPlayerController.prototype.onTouchDown=function(t){this.setInitialPos(t.changedTouches[0].x,t.changedTouches[0].y),t.event.preventDefault()},SpaceShipPlayerController.prototype.onTouchUp=function(t){this.updateSwipeDirection(t.changedTouches[0].x,t.changedTouches[0].y),t.event.preventDefault()},SpaceShipPlayerController.prototype.onMouseDown=function(t){t.button===pc.MOUSEBUTTON_LEFT&&this.setInitialPos(t.x,t.y)},SpaceShipPlayerController.prototype.onMouseUp=function(t){t.button===pc.MOUSEBUTTON_LEFT&&this.updateSwipeDirection(t.x,t.y)},SpaceShipPlayerController.prototype.setInitialPos=function(t,e){this._initialTouchPos={x:t,y:e}},SpaceShipPlayerController.prototype.updateSwipeDirection=function(t,e){var i={x:t,y:e},n=vectorAngleDegree(this._initialTouchPos,i);debugLog("Degree: "+n),n<-135||n>135?(debugLog("Swiped Left"),setTimeout((()=>{this.SwipLeft()}),0),this.entity.anim.setTrigger("Left"),this.entity.sound.play("Swipe")):n>-135&&n<-45?(debugLog("Swiped Up"),this.SwipUp()):n>-45&&n<45?(debugLog("Swiped Right"),setTimeout((()=>{this.SwipRight()}),0),this.entity.anim.setTrigger("Right"),this.entity.sound.play("Swipe")):n>45&&n<135&&(debugLog("Swiped Down"),this.SwipDown())},SpaceShipPlayerController.prototype.SwipUp=function(){this.entity.anim.setTrigger("Jump")},SpaceShipPlayerController.prototype.SwipDown=function(){2!==this.IsSwipedDown&&3!==this.HightIndex||(3==this.HightIndex?this.HightIndex=2:this.HightIndex=-3)},SpaceShipPlayerController.prototype.SwipLeft=function(){if(0===this.LaneIndex||1===this.LaneIndex){var t=this.entity.getPosition();1==this.LaneIndex?(this.LaneIndex=0,t.x=0,this.left=t.x):(this.LaneIndex=-1,t.x=this.SwipeDistance,this.left=t.x)}},SpaceShipPlayerController.prototype.SwipRight=function(){if(0===this.LaneIndex||-1===this.LaneIndex){var t=this.entity.getPosition();-1==this.LaneIndex?(this.LaneIndex=0,t.x=0,this.left=t.x):(this.LaneIndex=1,t.x=-this.SwipeDistance,this.left=t.x)}},SpaceShipPlayerController.prototype.update=function(t){this.app.keyboard.wasPressed(pc.KEY_LEFT)?(setTimeout((()=>{this.SwipLeft()}),0),this.entity.anim.setTrigger("Left"),this.entity.sound.play("Swipe")):this.app.keyboard.wasPressed(pc.KEY_RIGHT)&&(setTimeout((()=>{this.SwipRight()}),0),this.entity.anim.setTrigger("Right"),this.entity.sound.play("Swipe"));var e=Math.min(t/this.SwipeSpeedFacter,1),i=this.entity.getPosition(),n=new pc.Vec3(this.left,i.y,i.z);this.pivotPoint.lerp(i,n,e),this.entity.setPosition(this.pivotPoint),this.entity.translate(0,0,this.ForwordSpeed*t*10)};var vectorMagnitude=function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)},vectorAngleDegree=function(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI},debugLog=function(t){SwipeInput.VERBOSE&&console.log(t)};var UiManager=pc.createScript("uiManager");UiManager.attributes.add("StarCountTxt",{type:"entity"}),UiManager.attributes.add("PauseBtnEntity",{type:"entity"}),UiManager.attributes.add("PauseMenuEntity",{type:"entity"}),UiManager.attributes.add("ResumeBtnEntity",{type:"entity"}),UiManager.attributes.add("RestartBtnEntity",{type:"entity"}),UiManager.attributes.add("AudioBtnEntity",{type:"entity"}),UiManager.attributes.add("LevelTransitionEntity",{type:"entity"}),UiManager.attributes.add("GameEndEntity",{type:"entity"}),UiManager.attributes.add("GameEndStarCountTxt",{type:"entity"}),UiManager.attributes.add("GameEndRestartEntity",{type:"entity"}),UiManager.prototype.initialize=function(){this.PauseBtnEntity.button.on("mousedown",this.OnClickPlause,this),this.ResumeBtnEntity.button.on("mousedown",this.OnClickResume,this),this.RestartBtnEntity.button.on("mousedown",this.OnClickRestart,this),this.AudioBtnEntity.button.on("mousedown",this.OnClickAudio,this),this.GameEndRestartEntity.button.on("mousedown",this.OnClickRestart,this),this.PauseBtnEntity.button.on(pc.EVENT_TOUCHSTART,this.OnClickPlause,this),this.ResumeBtnEntity.button.on(pc.EVENT_TOUCHSTART,this.OnClickResume,this),this.RestartBtnEntity.button.on(pc.EVENT_TOUCHSTART,this.OnClickRestart,this),this.GameEndRestartEntity.button.on(pc.EVENT_TOUCHSTART,this.OnClickRestart,this),this.AudioBtnEntity.button.on(pc.EVENT_TOUCHSTART,this.OnClickAudio,this),this.StarCountTxt.element.text=0},UiManager.prototype.UpdateStarCount=function(t){this.StarCountTxt.element.text=t},UiManager.prototype.OnClickPlause=function(){this.app.timeScale=0,globalVariables.IsGamePause||(globalVariables.IsGamePause=!0,this.PauseMenuEntity.enabled=!0)},UiManager.prototype.OnClickResume=function(){this.app.timeScale=1,globalVariables.IsGamePause=!1,this.PauseMenuEntity.enabled=!1},UiManager.prototype.OnClickRestart=function(){this.app.timeScale=1,globalVariables.GameManagerEntity.script.gameManager.Reset(),this.Reset(),globalVariables.IsGamePause=!1},UiManager.prototype.OnClickAudio=function(){},UiManager.prototype.ShowSceneTransition=function(){globalVariables.SoundManagerEntity.script.soundManager.PlayTransitionEffect(),this.LevelTransitionEntity.enabled=!0,setTimeout((()=>{this.LevelTransitionEntity.enabled=!1}),1e3)},UiManager.prototype.ShowGameEnd=function(t){this.GameEndStarCountTxt.element.text=t,this.GameEndEntity.enabled=!0},UiManager.prototype.Reset=function(){this.PauseMenuEntity.enabled=!1,this.GameEndEntity.enabled=!1,this.StarCountTxt.element.text=0,this.GameEndStarCountTxt.element.text=0};var ObstaclesHandler=pc.createScript("obstaclesHandler");ObstaclesHandler.attributes.add("ColliderEntity",{type:"entity"}),ObstaclesHandler.attributes.add("HitParticleEntity",{type:"entity"}),ObstaclesHandler.attributes.add("Offset",{type:"vec3"}),ObstaclesHandler.prototype.initialize=function(){this.ColliderEntity.collision.on("triggerenter",this.onTriggerEnter,this)},ObstaclesHandler.prototype.onTriggerEnter=function(t){if(this.entity.tags.has("Obstacle")){globalVariables.SoundManagerEntity.script.soundManager.PlayObstacleHit(),(t.tags.has("Human")||t.tags.has("Horse")||t.tags.has("Boat")||t.tags.has("Train")||t.tags.has("Car")||t.tags.has("Planet")||t.tags.has("SpaceShip"))&&globalVariables.GameManagerEntity.script.gameManager.ReduceStarCount(1);var a=globalVariables.OpstacleHitParticle.clone(),e=this.entity.getPosition();e.z=e.z+this.Offset.z,a.setPosition(e),a.enabled=!0,setTimeout((()=>{a.destroy()}),3e3),this.entity.destroy()}};var StarHandler=pc.createScript("starHandler");StarHandler.attributes.add("ColliderEntity",{type:"entity"}),StarHandler.attributes.add("HitParticleEntity",{type:"entity"}),StarHandler.prototype.initialize=function(){this.ColliderEntity.collision.on("triggerenter",this.onTriggerEnter,this)},StarHandler.prototype.onTriggerEnter=function(t){this.entity.tags.has("Coin")&&((t.tags.has("Human")||t.tags.has("Horse")||t.tags.has("Boat")||t.tags.has("Train")||t.tags.has("Car")||t.tags.has("Planet")||t.tags.has("SpaceShip"))&&globalVariables.GameManagerEntity.script.gameManager.AddStarCount(1),globalVariables.SoundManagerEntity.script.soundManager.PlayCoinCollect()),this.entity.destroy()};var Rotate=pc.createScript("rotate");Rotate.attributes.add("speed",{type:"number",default:1}),Rotate.attributes.add("XPosSpeed",{type:"number",default:0}),Rotate.attributes.add("ZPosSpeed",{type:"number",default:0}),Rotate.prototype.initialize=function(){},Rotate.prototype.update=function(t){this.entity.rotateLocal(t*this.XPosSpeed*20,t*this.speed*20,t*this.ZPosSpeed*20)},Rotate.prototype.swap=function(t){};var GlobalVariables=pc.createScript("globalVariables");GlobalVariables.attributes.add("IsGamePause",{type:"boolean",default:!1}),GlobalVariables.attributes.add("GameManagerEntity",{type:"entity"}),GlobalVariables.attributes.add("UIManagerEntity",{type:"entity"}),GlobalVariables.attributes.add("SoundManagerEntity",{type:"entity"}),GlobalVariables.attributes.add("CoinHitParticles",{type:"entity"}),GlobalVariables.attributes.add("OpstacleHitParticle",{type:"entity"}),GlobalVariables.prototype.initialize=function(){window.globalVariables=this};var MeshVis=pc.createScript("meshVis");MeshVis.attributes.add("MeshIndex",{type:"number",array:!0}),MeshVis.attributes.add("OnUpdate",{type:"boolean",default:!1}),MeshVis.prototype.initialize=function(){for(var e=0;e<this.MeshIndex.length;e++){var s=this.entity.model.meshInstances[this.MeshIndex[e]];console.log(s.visible),s.visible=!1}},MeshVis.prototype.update=function(e){if(this.OnUpdate)for(var s=0;s<this.MeshIndex.length;s++){var t=this.entity.model.meshInstances[this.MeshIndex[s]];console.log(t.visible),t.visible=!1}};var ScrollingTexture=pc.createScript("scrollingTexture");ScrollingTexture.attributes.add("materialAsset",{type:"asset"}),ScrollingTexture.attributes.add("speed",{type:"vec2"}),ScrollingTexture.tmp=new pc.Vec2,ScrollingTexture.prototype.initialize=function(){this.materialAsset&&(this.material=this.materialAsset.resource)},ScrollingTexture.prototype.update=function(e){var t=ScrollingTexture.tmp;t.set(this.speed.x,this.speed.y),t.scale(e),this.material.diffuseMapOffset=this.material.diffuseMapOffset.add(t),this.material.normalMapOffset.add(t),this.material.emissiveMapOffset.add(t),this.material.update()};var MoveCam=pc.createScript("moveCam");MoveCam.attributes.add("Speed",{type:"number"}),MoveCam.prototype.initialize=function(){},MoveCam.prototype.update=function(e){this.entity.translate(0,0,this.Speed)};var SoundManager=pc.createScript("soundManager");SoundManager.attributes.add("HumanSounds",{type:"entity"}),SoundManager.attributes.add("GlobalSounds",{type:"entity"}),SoundManager.prototype.PlayCoinCollect=function(){this.GlobalSounds.sound.play("Coin")},SoundManager.prototype.PlayObstacleHit=function(){this.GlobalSounds.sound.play("ObstacleHit")},SoundManager.prototype.PlayEnemyHit=function(){this.GlobalSounds.sound.play("EnemyHit")},SoundManager.prototype.PlayTransitionEffect=function(){this.GlobalSounds.sound.play("EnemyHit")};